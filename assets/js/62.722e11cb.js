(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{443:function(t,n,s){"use strict";s.r(n);var a=s(0),e=Object(a.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("昨天太无聊了,于是就去折腾了一下 emby 的 302 转发，其实整体上还是很简单的，毕竟已经有了别人的脚本。")]),t._v(" "),n("h2",{attrs:{id:"emby-与挂载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#emby-与挂载"}},[t._v("#")]),t._v(" emby 与挂载")]),t._v(" "),n("p",[t._v("本地挂载用什么和最后能否 302 转发并没有什么关系，出于个人喜欢，我将 emby 内的路径和实体机的路径是一样的。")]),t._v(" "),n("p",[t._v("这里挂载使用的的 cd2。")]),t._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /home/shinonome/CloudDrive/115/视频"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/home/shinonome/CloudDrive/115/视频 "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Media directory")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h2",{attrs:{id:"_302-转发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_302-转发"}},[t._v("#")]),t._v(" 302 转发")]),t._v(" "),n("p",[t._v("转发使用的是 "),n("a",{attrs:{href:"https://github.com/bpking1/embyExternalUrl/tree/main",target:"_blank",rel:"noopener noreferrer"}},[t._v("这位大佬的"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("需要注意的是只有三个文件")]),t._v(" "),n("ul",[n("li",[t._v("constant.js")]),t._v(" "),n("li",[t._v("include/https.conf")]),t._v(" "),n("li",[t._v("config/constant-mount.js")])]),t._v(" "),n("h3",{attrs:{id:"constant-conf"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#constant-conf"}},[t._v("#")]),t._v(" constant.conf")]),t._v(" "),n("p",[n("strong",[t._v("embyHost")]),t._v('\n填一个你电脑能访问的地址就好，我这里是 "'),n("a",{attrs:{href:"http://127.0.0.1:8096%22",target:"_blank",rel:"noopener noreferrer"}},[t._v('http://127.0.0.1:8096"'),n("OutboundLink")],1)]),t._v(" "),n("p",[n("strong",[t._v("embyAPI")]),t._v("\n自己申请一个复制进来就好")]),t._v(" "),n("p",[n("strong",[t._v("embyMountPath")]),t._v("\n最重要的内容，主要是负责nginx怎么找以及找到后怎么给 alist")]),t._v(" "),n("p",[t._v("其实理解了这个就很容易知道要怎么填了")]),t._v(" "),n("p",[t._v("我这里 emby 是挂载到 "),n("code",[t._v("/home/shinonome/CloudDrive/115/视频")])]),t._v(" "),n("p",[t._v("而 alist 中是 "),n("code",[t._v("/115")])]),t._v(" "),n("p",[t._v('那么这里就写 ["/home/shinonome/CloudDrive"]')]),t._v(" "),n("p",[t._v("也就是告诉以这个开头的要处理，同时剩余的是给 alist 处理的，所以大家映射的时候也别太复杂了")]),t._v(" "),n("h3",{attrs:{id:"https-conf"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#https-conf"}},[t._v("#")]),t._v(" https.conf")]),t._v(" "),n("p",[t._v("自己填写自己的证书位置，同时修改一下监听的端口、地址什么的。")]),t._v(" "),n("h3",{attrs:{id:"constant-mount"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#constant-mount"}},[t._v("#")]),t._v(" constant-mount")]),t._v(" "),n("p",[n("strong",[t._v("alistAddr")]),t._v("\n同embyHost，填你能访问 alist 的地址。")]),t._v(" "),n("p",[n("strong",[t._v("alistToken")]),t._v("\nAlist -> 管理 -> 设置 -> 其他 -> 令牌")]),t._v(" "),n("h2",{attrs:{id:"nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" nginx")]),t._v(" "),n("p",[t._v("我没有使用他提供的docker，而我又没有安装 njs ，所以一开始有报错，安装 njs 导入就好了,详情可抄作者提供的 nginx.conf")]),t._v(" "),n("p",[t._v("同时我不使用任何 http 的内容，所以我删除了 emby.conf 中关于 http 的内容。")])])}),[],!1,null,null,null);n.default=e.exports}}]);